<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/html4/loose.dtd">
<html>
<head>
<title node='con:form_title'>MindRetrieve - %s</title>
<link rel="stylesheet" href="/main.css" type="text/css">
<style>
  .error_message { color:red }
  .date_field   {
    padding-left: 0.5em;
    padding-right: 0.5em;
    background-color: #eee;
  }
  .date_padding {
    padding-left: 8em;
    background-color: #eee;
  }
</style>

<script>

function openHome() {
    w=window.open("/weblib","mindretrieve");
    w.focus();
    window.close();
}

function ondelete() {
    var form = document.getElementById('edit_form');
    form.elements['method'].value = 'DELETE';
    form.submit();
}

function onload(e) {
    window.focus();
}

window.addEventListener('load', onload, false);

</script>
</head>


<body>

<div id='header'>
<form action='/weblib' method='get'>
<table width="100%" cellspacing='0' cellpadding='0'>
<tr>
  <td>
  <a id='homeLink' href='javascript:void(0);' onclick='javascript:openHome();' style='font-size:150%'>MindRetrieve</a>
  </td>
</tr>
</table>
</form>
</div>

<form node='con:form' id='edit_form' method='GET' action='/weblib/$id'>
    <input type='hidden' name='method' value='PUT' />
    <input type='hidden' name='filled' value='1' />
    <table cellspacing='5'>
    <tr node='con:error'>
        <td colspan='2'><span node='con:message' class='error_message'>Please correct the error.</span></td>
    </tr>
    <tr>
        <td>*Title</td>
        <td><input type='text' node='con:name' name='title' size='100' /></td>
    </tr>
    <tr>
        <td>*Address</td>
        <td><input type='text' node='con:url' name='url' size='95' />
        <a node='con:url_link' href="#" target='_blank'>open</a>
        </td>
    </tr>
    <tr>
        <td>Description</td>
        <td><textarea node='con:description' name='description' cols='80' rows='6'></textarea></td>
    </tr>
    <tr>
        <td>Tags</td>
        <td><input type='text' node='con:tags' name='tags' size='50' /> (separate tags by comma)</td>
    </tr>
    <tr>
        <td>Modified</td>
        <td>
            <span class='date_field' node='con:modified_txt'><span class='date_padding'></span></span>
            <span style="margin-left:1em">Last Used&nbsp;</span>
            <span class='date_field' node='con:lastused_txt'><span class='date_padding'></span></span>
            <span style="margin-left:1em">Cached&nbsp;</span>
            <span class='date_field' node='con:cached_txt'><span class='date_padding'></span></span>
            <input type='hidden' node='con:modified' name='modified' size='15' />
            <input type='hidden' node='con:lastused' name='lastused' size='15' />
            <input type='hidden' node='con:cached' name='cached' size='15' />
        </td>
    </tr>
    <tr>
        <td></td>
        <td>
            <input class='btn' type='submit' name='action' value='OK' />
            &nbsp;
            <input class='btn' type='button' name='action' value='Delete' onclick='javascript:ondelete();' />
            &nbsp;
            <input class='btn' type='button' name='action' value='Cancel' onclick='javascript:window.close();' />
        </td>
    </tr>
    </table>

    <!-- Script to handle posting with new tags -->
    <input type='hidden' name='create_tags' value=''/>
    <script node='con:new_tags'>
      new_tags = '%s';
    </script>

    <script>
    function ask_save_new_tags() {
      msg = 'The tags (' + new_tags + ') have not been used before. Add the new tags?';
      if (confirm(msg)) {
          form = document.getElementById('edit_form');
          form.elements['create_tags'].value = '1';
          form.submit();
      }
    }
    if (new_tags) {
      ask_save_new_tags();
    }
    </script>

</form>

</body>
</html>